{% extends 'swap/base.html' %}
{% block content %}
    <div class="row uniform">

        <div class="12u$">
            <h2>WELCOME {{ obj.student.username }}</h2>
            <a href="/api/auth/logout" class="button">Logout</a>
        </div>

        <div class="8u$ 12u$(small)">
            <h2><span class=" icon fa-clock-o"></span> Pending trades</h2>
            <a href="/maketrade" class="button special right">Make a trade</a>
        </div>

        <div class="8u$ 12u$(small)">
            <h2><span class=" icon fa-flask"></span> Equipments you have</h2>
            <div class="table-wrapper">
                <table>
                    <tr>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Quantity</th>
                        <th>Action</th>
                    </tr>
                    {% for equip in obj.equiplist %}
                        <tr id="equipment-{{ equip.equipmentID}}">
                            <td>
                                {{ equip.equipmentName }}
                            </td>
                            <td>
                                {{ equip.equipmentType }}
                            </td>
                            <td>
                                <form method="post" action="/api/student/equipment/update" style="display: inline-block">
                                    {% csrf_token %}
                                    <input type="hidden" value="{{ obj.student.username }}"/>
                                    <input type="hidden" name="equipmentid" value="{{ equip.equipmentID }}">
                                    <input type="number" name="quantity" min="1" value="{{ equip.quantity }}">
                                    <input type="submit" value="Save"/>
                                </form>
                            </td>
                            <td>
                                <form method="post" action="/api/student/equipment/delete" style="display: inline-block">
                                    {% csrf_token %}
                                    <input type="hidden" value="{{ obj.student.username }}"/>
                                    <input type="hidden" name="equipmentid" value="{{ equip.equipmentID }}">
                                    <input type="submit" value="Delete"/>
                                </form>
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
            <a href="/addequipment" class="button special right">Add Equipment</a>
        </div>

        <div class="8u$ 12u$(small)">
            <h2><span class=" icon fa-graduation-cap"></span> Courses you are enrolled in</h2>
            <div class="table-wrapper">
                <table>
                    <thread>
                        <tr>
                            <th>Faculty</th>
                            <th>Number</th>
                            <th>Term</th>
                            <th>Action</th>
                        </tr>
                    </thread>
                    <tbody>
                    {% for class in obj.classlist %}
                        <tr>
                            <td>
                                {{ class.faculty }}
                            </td>
                            <td>
                                {{ class.classNum }}
                            </td>
                            <td>
                                {{ class.term }}
                            </td>
                            <td>
                                <form method="post" action="/api/student/class/drop">
                                    {% csrf_token %}
                                    <input type="hidden" name="faculty" value="{{ class.faculty }}"/>
                                    <input type="hidden" name="classnum" value="{{ class.classNum }}"/>
                                    <input type="hidden" name="term" value="{{ class.term }}"/>
                                    <input type="submit" value="Remove"/>
                                </form>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
            <a href="/enroll" class="button special right">Enroll in another course</a>
        </div>
    </div>

{% endblock %}